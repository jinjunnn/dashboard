# 项目变更日志

## [0.1.9] - 2025-09-05：🔧 PWA安装优化和问题诊断

### 主要变更
- **PWA安装问题诊断**: 彻底解决Chrome浏览器PWA安装按钮不显示问题
- **图标格式优化**: 将SVG图标替换为PNG格式，提升浏览器兼容性
- **安装流程优化**: 改进Service Worker注册和安装提示机制
- **调试工具**: 新增PWA状态检查页面，便于诊断安装问题

### 技术细节
- **PNG图标生成**: 使用Python PIL自动生成8个尺寸的PNG图标(72x72到512x512)
- **截图生成**: 创建桌面和移动端截图，符合PWA商店要求
- **Service Worker优化**: 修复deferredPrompt作用域问题，改进事件监听器管理
- **安装检查页面**: `/pwa-test` 实时监控PWA状态和浏览器兼容性
- **文件更新**:
  - `public/icons/` - 全套PNG图标和快捷方式图标
  - `public/screenshots/` - 应用截图用于PWA安装
  - `src/app/pwa-test/page.tsx` - PWA状态诊断页面
  - `src/components/pwa/ServiceWorkerRegistration.tsx` - 优化安装流程
  - `manifest.json` - 更新图标类型为PNG

## [0.1.8] - 2025-09-05：📱 PWA功能完整实现

### 主要变更
- **PWA完整支持**: 将股票信号分析系统转换为功能完整的Progressive Web App
- **原生应用体验**: 支持添加到主屏幕，全屏模式，离线功能
- **Service Worker**: 实现智能缓存策略和后台同步
- **自动安装提示**: 智能检测并提示用户安装PWA应用

### 技术细节
- **Manifest配置**: 完整的PWA清单文件，包含应用信息、图标、快捷方式
- **Service Worker**: 缓存优先策略用于静态资源，网络优先用于API数据
- **自适应图标**: SVG格式图标支持多种尺寸，自动生成脚本
- **Meta标签优化**: Apple Web App、Open Graph、Twitter Card完整支持
- **安装提示组件**: 自定义安装横幅，支持7天重复提醒控制
- **离线功能**: 关键页面和数据的离线访问支持
- **快捷方式**: 日内信号、日线信号、股票分析、仪表板快速访问
- **文件新增**: 
  - `public/manifest.json` - PWA清单文件
  - `public/sw.js` - Service Worker缓存策略
  - `src/components/pwa/ServiceWorkerRegistration.tsx` - SW注册组件
  - `public/icons/app-icon.svg` - 应用主图标
  - `generate-icons.sh` - 图标生成脚本
  - `PWA-SETUP.md` - 完整的PWA部署指南

### 用户功能
- **添加到主屏幕**: Chrome/Safari/Edge全平台支持
- **离线访问**: 网络不佳时仍可查看缓存的信号数据
- **快速加载**: Service Worker缓存显著提升加载速度
- **原生体验**: 全屏显示，无浏览器地址栏干扰
- **智能提醒**: 自定义安装提示和更新通知

## [0.1.7] - 2025-09-05：🔥 新增固定顶部栏和功能按钮

### 主要变更
- **固定顶部栏**: 信号详情页面顶部内容在滚动时保持固定显示
- **功能按钮增强**: 新增分享、收藏、提醒、导出等实用功能按钮
- **响应式设计**: 移动端自动隐藏按钮文字，保持紧凑布局
- **用户体验优化**: 顶部栏采用背景模糊效果，保持视觉层次

### 技术细节
- **固定定位实现**: 使用`sticky top-0 z-10`实现顶部栏固定
- **背景模糊效果**: 采用`backdrop-blur`和半透明背景提升视觉效果
- **功能按钮组**: 分享(Share2)、收藏(BookmarkPlus)、提醒(AlertCircle)、导出(Download)
- **响应式文字**: 使用`hidden sm:inline`在小屏幕隐藏按钮文字
- **信号ID简化**: 显示ID后8位提升可读性
- **文件变更**: 
  - `src/app/(main)/signals/intraday/[signalType]/[id]/page.tsx`
  - `src/app/(main)/signals/daily/[signalType]/[id]/page.tsx`

## [0.1.6] - 2025-09-05：🎨 优化信号详情页面布局

### 主要变更
- **布局优化**: 将TradingView图表组件移动到交易建议下方
- **用户体验提升**: 优化信号详情页面的信息层次和阅读顺序
- **布局一致性**: 统一日内和日线信号详情页面的组件排列顺序

### 技术细节
- **组件重排序**: 将TradingView图表从技术分析前移动到交易建议后
- **信息层次优化**: 股票信息 → 技术分析 → 交易建议 → 图表 → 相关信号
- **文件变更**: 
  - `src/app/(main)/signals/intraday/[signalType]/[id]/page.tsx`
  - `src/app/(main)/signals/daily/[signalType]/[id]/page.tsx`

## [0.1.5] - 2025-09-05：🔧 修复信号方向显示错误（数据类型匹配）

### 主要变更
- **方向显示修复**: 解决信号方向显示为"未知"的问题
- **数据类型匹配**: 发现数据库direction字段为文本类型，修正字符串比较逻辑
- **全面修复**: 同时修复信号详情页面和信号表格的方向显示问题

### 技术细节
- **根本原因**: 数据库direction字段为text类型，存储字符串"1"和"-1"，不是数字1和-1
- **信号详情页面**: 修正`signal.direction === 1`为`signal.direction === "1"`的字符串比较
- **信号表格组件**: 在formatDirection和getDirectionColor函数中添加对"1"和"-1"字符串的处理
- **文件变更**: 
  - `src/app/(main)/signals/intraday/[signalType]/[id]/page.tsx`
  - `src/app/(main)/signals/daily/[signalType]/[id]/page.tsx`
  - `src/components/signals/signals-table.tsx`

## [0.1.4] - 2025-09-05：🎯 修复信号状态显示问题

### 主要变更
- **状态显示修复**: 解决pending状态信号显示为"已过期"的错误问题
- **状态映射优化**: 完善信号状态的中文显示和样式配置
- **用户体验改进**: 信号状态现在能准确反映实际业务状态

### 技术细节
- **src/components/signals/signals-table.tsx**: 添加`formatStatus`函数处理所有信号状态显示
- **状态映射表**: active→活跃, pending→等待中, created→已创建, expired→已过期, cancelled→已取消
- **Badge样式优化**: 不同状态使用不同的Badge变体(default/outline/secondary/destructive)
- **显示一致性**: 统一三个表格视图(股票页面/信号页面/默认页面)的状态显示逻辑

## [0.1.3] - 2025-09-05：🐛 修复日内信号查询为空问题

### 主要变更
- **查询逻辑修复**: 解决日内信号查询结果为空的问题
- **状态过滤优化**: 扩展信号状态查询范围，包含created、pending、active状态
- **数据可见性提升**: 确保所有有效状态的信号都能被正确查询和显示

### 技术细节
- **src/lib/database/signals-query.ts**: 修复硬编码的status='active'过滤条件
- **状态查询范围**: 从单一'active'状态扩展为包含'created', 'pending', 'active'状态
- **参数索引调整**: 同步更新相关查询函数中的参数索引以保持一致性
- **统计查询同步**: 统一所有查询函数的状态过滤逻辑

## [0.1.2] - 2025-09-05：🔧 清理信号配置文件

### 主要变更
- **配置文件优化**: 清理日内信号配置中的小写信号类型条目
- **数据库更新**: 将今日(9月5日)所有信号级别统一更改为小写"intraday"
- **配置简化**: 移除重复的小写版本配置，保持配置文件一致性

### 技术细节
- **src/config/signals-config.ts**: 移除6个小写信号类型配置（realtime_breakout, ict, order_block_pullback, breakout, up_gap, bullish_engulfing的小写版本）
- **Supabase数据库**: 批量更新今日251条信号记录的level字段从"1D"改为"intraday"
- **架构统一**: 确保配置文件只保留标准大写格式的信号类型定义

## [0.1.1] - 2025-09-05：🐛 修复信号服务构建错误

### 主要变更
- **构建错误修复**: 解决 Next.js 构建中 pg 模块在客户端环境的兼容性问题
- **架构优化**: 将数据库直连操作迁移至 API 路由，实现客户端和服务端分离
- **API 路由完善**: 创建完整的信号数据查询 API 端点系统

### 技术细节
- **src/app/api/signals/**: 新建信号数据 API 路由系统，支持列表查询、统计、单个查询、搜索功能
- **src/lib/services/signals-service.ts**: 重构为基于 API 调用的客户端服务，移除直接 pg 连接
- **API 调用优化**: 实现服务器端和客户端环境的 URL 自动处理机制

## [0.1.0] - 前端开发规范优化与文档结构重构

### 🏗️ 开发规范重构

- **优化.cursorrules核心规范**
  - 移除项目结构信息，专注核心开发规范
  - 增加前端特有的开发流程和检查清单
  - 优化工作流程，适配Next.js前端开发特性
  - 增强错误处理和性能监控规范

- **新增前端开发指南**
  - 创建 `frontend_development_guide.mdc` 专门针对前端开发
  - 包含TypeScript、React、Next.js特定规范
  - 添加前端特有的测试流程和性能检查
  - 提供移动端开发和响应式设计规范

### 📚 文档生成系统

- **新增文档生成指南**
  - 创建 `docs_generation_guide.mdc` 规范文档自动生成
  - 定义标准文档模板和目录结构
  - 规范AI助手自动生成文档的触发条件和位置
  - 建立文档质量控制和维护规范

- **建立标准化docs目录结构**
  - 创建分类清晰的文档目录：api/、development/、deployment/、architecture/、user-guides/
  - 建立文档中心导航 `docs/README.md`
  - 定义文档迁移计划，整合现有文档

### 🔄 规则文档结构优化

- **更新help.mdc导航系统**
  - 增加快速开始指南分类
  - 重新组织核心规范、数据配置分类
  - 添加详细的使用指南和问题排查指南
  - 提供最佳实践建议

- **分离关注点**
  - 项目结构信息移至独立规则文档
  - 核心开发规范聚焦于工作流程
  - 前端特性单独成文档模块

### 💡 开发体验改进

- **简化开发前准备**
  - 30秒快速环境检查流程
  - 标准化的开发前检查命令

- **强化质量控制**
  - 明确的前端特有测试检查清单
  - 性能和可访问性检查要求
  - 自动化文档生成和版本管理

## [0.0.19] - 搜索结果显示问题修复和UI优化

### 🐛 关键Bug修复

- **修复搜索结果不显示问题**

  - 问题：搜索API正常返回结果，但UI中不显示搜索结果
  - 原因：shadcn/ui Command组件的内置过滤机制干扰了手动控制的搜索结果
  - 解决：在CommandDialog组件中添加 `shouldFilter={false}` 属性

- **Command组件优化**
  - 更新 `CommandDialog` 组件支持 `shouldFilter` 属性
  - 禁用cmdk的内置过滤功能，使用自定义搜索逻辑
  - 为 `CommandItem` 添加 `value` 属性确保正确渲染

### 🎨 用户界面优化

- **清理调试信息**

  - 移除UI中的调试状态显示
  - 移除控制台中的详细调试日志
  - 保留必要的错误日志

- **简化搜索交互**
  - 移除搜索按钮，保持简洁界面
  - 只保留回车键触发搜索的方式
  - 优化提示文本，更加简洁明了

### 📁 文件修改清单

- `src/components/ui/command.tsx`：添加shouldFilter属性支持
- `src/components/search/enhanced-search-dialog.tsx`：修复搜索问题并优化UI

### ✅ 最终效果

- ✅ 搜索结果正确显示在UI中
- ✅ 只需回车键即可触发搜索
- ✅ 界面简洁，无多余的调试信息
- ✅ 用户体验流畅自然

### 🎯 技术要点

- **Command组件过滤机制**：禁用内置过滤，使用自定义搜索
- **状态驱动渲染**：基于hasSearched和hasResults状态控制UI显示
- **简洁交互设计**：单一触发方式，减少用户认知负担

## [0.0.18] - 搜索交互机制重构和文档架构优化

### 🔄 搜索交互机制重构

- **触发机制改变**

  - 从实时搜索（300ms防抖）改为回车键触发搜索
  - 用户输入完成后按回车键执行搜索，更符合用户习惯
  - 提示文本更新：`输入关键词后按回车开始搜索`

- **状态管理重构**

  - 新增 `hasSearched` 状态，区分未搜索和无结果状态
  - 对话框打开时重置所有状态，确保每次使用都是干净状态
  - 搜索结果立即在当前对话框中显示，无需关闭重开

- **用户体验修复**
  - 修复搜索结果不显示的问题
  - 确保搜索完成后结果立即展示
  - 优化状态切换逻辑，避免状态混乱

### 📚 文档架构重构

- **规范文档整合**

  - 创建 `.cursor/rules/search-system.mdc` - 完整的搜索系统规范
  - 创建 `.cursor/rules/environment-setup.mdc` - 环境配置规范
  - 删除 `.cursor/docs/` 中的重复技术文档

- **文档定位明确**
  - `rules/` 目录：给agent参考的技术规范和背景知识
  - `docs/` 目录：给用户查看的使用指南和说明文档
  - 统一文档引用格式：`[文档名称](mdc:.cursor/rules/filename.mdc)`

### 🔧 技术改进

- **回调函数优化**

  - 使用 `useCallback` 优化 `performSearch` 和 `handleKeyDown` 函数
  - 避免不必要的重渲染和函数重创建
  - 改进事件处理的性能

- **状态逻辑简化**
  - 移除复杂的防抖逻辑，简化为直接搜索
  - 清晰的状态流转：未搜索 → 搜索中 → 有结果/无结果
  - 每次打开对话框都重置状态，确保一致性

### 📁 文件修改清单

- `src/components/search/enhanced-search-dialog.tsx`：搜索交互机制重构
- `.cursor/rules/search-system.mdc`：新建搜索系统完整规范
- `.cursor/rules/environment-setup.mdc`：新建环境配置规范
- `.cursor/rules/project_structure.mdc`：更新搜索功能引用
- **删除文件**：
  - `.cursor/docs/search-module.md`
  - `.cursor/docs/search-optimization-summary.md`
  - `.cursor/docs/environment-setup.md`

### 🎯 用户体验提升

- **更直观的交互**：回车键触发符合用户搜索习惯
- **更可靠的结果显示**：修复结果不显示的问题
- **更清晰的状态指示**：明确区分不同状态的UI展示
- **更一致的体验**：每次打开都是全新的搜索状态

### 📋 开发体验改进

- **文档架构清晰**：技术规范和用户文档分离
- **规范引用统一**：使用mdc链接格式引用规范文档
- **agent友好**：技术规范放在rules目录，便于agent参考
- **维护性提升**：避免文档重复，统一信息源

## [0.0.17] - 搜索用户体验优化

### 🎨 搜索界面优化

- **加载状态改进**

  - 输入开始立即显示优雅的加载动画和"正在搜索..."提示
  - 加载图标增大为6x6，颜色使用主题色，提升视觉效果
  - 居中显示，增加适当的间距和垂直布局

- **空状态优化**

  - 未输入时：显示搜索图标和详细的使用提示
  - 无结果时：显示友好的"未找到相关结果"提示
  - 添加次级提示文本，指导用户使用

- **结果显示改进**
  - 移除统计文本显示，直接展示搜索结果
  - 分组标题显示数量：`股票 (3)` 和 `信号 (2)`
  - 清晰的视觉层次和信息结构

### 🔧 交互体验提升

- **即时响应**: 用户输入开始立即显示加载状态，无延迟感
- **状态管理**: 优化加载状态的设置时机，确保状态切换流畅
- **视觉反馈**: 加强加载动画的视觉效果，提升用户感知

### 📋 技术改进

- **状态同步**: 修复空查询时的加载状态清理
- **组件优化**: 简化状态逻辑，移除不必要的计算
- **代码清理**: 删除冗余的搜索提示文本生成函数

### 📁 文件修改清单

- `src/components/search/enhanced-search-dialog.tsx`：搜索体验全面优化
- `.cursor/docs/search-module.md`：更新搜索体验文档
- `.cursor/rules/project_structure.mdc`：更新搜索功能架构说明

### 🎯 用户体验提升

- **更快的反馈**：输入开始立即显示加载状态
- **更清晰的状态**：不同状态下有明确的视觉指示
- **更友好的提示**：空状态和无结果状态提供有用的指导
- **更直观的结果**：去除统计干扰，直接展示搜索内容

## [0.0.16] - 启动错误优化和网络超时处理

### 🐛 启动错误修复

- **Google Fonts下载失败问题**

  - 添加字体fallback配置：`fallback: ['system-ui', 'arial']`
  - 设置字体display策略：`display: 'swap'`
  - 优化字体加载性能，减少阻塞时间

- **网络请求超时优化**
  - 改进Supabase连接错误处理和日志记录
  - 完善错误信息格式，包含详细的错误代码和提示
  - 自动降级到模拟数据，确保应用正常运行

### 🔧 配置优化

- **Next.js配置增强**
  - 启用字体优化：`optimizeFonts: true`
  - 添加包导入优化：`optimizePackageImports`
  - 配置Supabase外部包处理
- **开发体验改进**
  - 更详细的错误日志格式
  - 网络问题时的优雅降级机制
  - 减少编译时的网络依赖

### 📁 文件修改清单

- `src/app/layout.tsx`：优化Inter字体配置
- `src/lib/services/signals-service.ts`：改进错误处理和日志
- `next.config.mjs`：添加性能优化配置

### ✅ 问题解决

- ✅ 消除Google Fonts下载失败警告
- ✅ 减少网络请求超时错误
- ✅ 改进启动时的错误信息可读性
- ✅ 确保网络问题时应用仍可正常使用

### 🎯 用户体验提升

- **更快的启动速度**：减少字体加载阻塞
- **更好的错误恢复**：网络问题时自动使用模拟数据
- **清晰的错误信息**：开发时更容易调试问题

## [0.0.15] - 信号类型映射系统重构

### 🔧 核心架构改进

- **精确映射系统**：使用专门的映射表替代大小写转换
  - 新增 `urlToDbMapping` 映射表：URL参数 → 数据库字段名
  - 新增 `getDbFieldNameFromUrl()` 函数：URL转换为数据库字段
  - 新增 `getUrlFromDbFieldName()` 函数：数据库字段转换为URL
- **重构 `findSignalConfig()` 函数**：基于映射表的精确查找，避免大小写转换的不准确性

### 🐛 关键问题修复

- **映射不准确问题**：某些信号名称（如 `SupportZoneBreakdown`）的大小写转换不正确
- **链接生成错误**：总览页面和侧边栏导航使用不准确的 `signal.name.toLowerCase()` 方式
- **路由匹配失败**：复杂的模糊匹配逻辑导致的不确定性

### 📁 文件修改清单

- `src/config/signals-config.ts`：新增映射表和工具函数
- `src/app/(main)/signals/intraday/page.tsx`：使用精确映射生成链接
- `src/app/(main)/signals/daily/page.tsx`：使用精确映射生成链接
- `src/navigation/sidebar/sidebar-items.ts`：使用精确映射生成导航链接

### ✅ 验证结果

- ✅ 所有信号类型页面正常访问：`/signals/intraday/swing_high_rebreakout`
- ✅ 所有信号详情页面正常访问：`/signals/intraday/swing_high_rebreakout/1217`
- ✅ 日线信号页面正常访问：`/signals/daily/bullish_ssl/2001`
- ✅ 侧边栏导航链接准确无误
- ✅ 总览页面链接准确无误

### 🎯 技术优势

- **准确性**：基于映射表的精确匹配，100%准确
- **可维护性**：集中管理所有映射关系，易于维护
- **扩展性**：新增信号类型只需更新映射表
- **性能**：直接映射查找，避免复杂的字符串处理

## [0.0.14] - 信号详情页面链接修复

### 🐛 关键Bug修复

- **修复信号列表页面点击跳转错误**
  - 问题：从信号类型列表页面点击信号ID时，跳转到错误的URL `/signals/intraday/1217`
  - 期望：应该跳转到正确的嵌套路由 `/signals/intraday/swing_high_rebreakout/1217`
  - 原因：`SignalsTable` 组件缺少 `signalType` 参数传递
  - 解决：更新所有调用 `SignalsTable` 的地方，正确传递 `signalType` 参数

### 🔧 技术修复详情

- **参数传递修复**：确保 `signalType` 参数在所有页面中正确传递
  - 信号类型列表页面：`/signals/intraday/[signalType]/page.tsx`
  - 信号详情页面：`/signals/intraday/[signalType]/[id]/page.tsx`
  - 对应的日线信号页面也进行了同样的修复
- **链接生成逻辑**：完善 `SignalsTable` 组件中的链接构建逻辑
  ```typescript
  const detailLink = category && signalType ? `/signals/${category}/${signalType}/${signal.id}` : null;
  ```

### ✅ 验证结果

- ✅ 信号类型列表页面正常加载：`/signals/intraday/swing_high_rebreakout`
- ✅ 信号详情页面正常访问：`/signals/intraday/swing_high_rebreakout/1217`
- ✅ 点击跳转功能正常工作：从列表页面点击信号ID正确跳转到详情页面
- ✅ 返回导航功能正常：从详情页面可以正确返回到信号类型列表

### 📁 受影响的文件

- `src/app/(main)/signals/intraday/[signalType]/page.tsx` - 添加 `signalType` 参数传递
- `src/app/(main)/signals/daily/[signalType]/page.tsx` - 添加 `signalType` 参数传递
- `src/app/(main)/signals/intraday/[signalType]/[id]/page.tsx` - 相关信号表格参数传递
- `src/app/(main)/signals/daily/[signalType]/[id]/page.tsx` - 相关信号表格参数传递
- `src/components/signals/signals-table.tsx` - 接口定义和链接生成逻辑已完善

---

## [0.0.13] - 路由架构重构：清晰的页面层级

### 🏗️ 重大架构改进

- **嵌套路由结构**：实现了更合理的URL层级结构
  ```
  /signals/intraday/swing_high_rebreakout     ← 信号类型列表页
  /signals/intraday/swing_high_rebreakout/1217 ← 信号详情页
  /signals/daily/bullish_ssl                  ← 信号类型列表页
  /signals/daily/bullish_ssl/2001             ← 信号详情页
  ```

### ✨ 用户体验提升

- **明确的返回路径**：信号详情页面现在有清晰的返回按钮，可以返回到对应的信号类型列表
- **URL语义化**：从URL结构就能清楚地看出页面层级关系
- **导航一致性**：统一了所有页面的导航逻辑

### 🔧 技术实现

- **页面分离**：信号类型列表页面和信号详情页面完全分离，各司其职
- **路由清理**：删除了所有冲突的动态路由文件，避免Next.js路由混乱
- **组件优化**：简化了统计卡片的实现，移除了不必要的组件依赖

### 📁 文件结构更新

- 新增：`src/app/(main)/signals/intraday/[signalType]/[id]/page.tsx`
- 新增：`src/app/(main)/signals/daily/[signalType]/[id]/page.tsx`
- 修改：`src/app/(main)/signals/intraday/[signalType]/page.tsx` - 专注于信号类型列表
- 修改：`src/app/(main)/signals/daily/[signalType]/page.tsx` - 专注于信号类型列表

### 🎯 解决的问题

- ✅ 修复了信号详情页面无法返回到对应信号类型列表的问题
- ✅ 解决了URL结构混乱导致的用户导航困惑
- ✅ 消除了智能路由判断带来的复杂性和潜在错误

---

## [0.0.11] 智能动态路由系统和404问题彻底修复

### 🐛 问题解决

- **修复所有信号页面404错误**：解决 `/signals/intraday/swing_high_rebreakout` 等URL无法访问的问题
- **解决Next.js路由冲突**：修复 `'id' !== 'signalType'` 动态路由slug名称冲突错误
- **清除缓存问题**：删除.next缓存并重启开发服务器解决路由加载问题

### 🏗️ 智能路由架构

- **统一动态路由**：
  - `/signals/intraday/[signalType]` - 智能处理信号类型和信号详情
  - `/signals/daily/[signalType]` - 智能处理信号类型和信号详情
- **智能路由判断**：
  - 数字参数（如 `1001`）→ 显示信号详情页面
  - 字符参数（如 `swing_high_rebreakout`）→ 显示信号类型页面

### 🔧 功能完善

- **智能信号匹配**：使用 `findSignalConfig` 函数支持多种格式识别（大小写不敏感）
- **统一页面设计**：信号类型页面包含完整的统计概览、信号列表、风险等级展示
- **正确导航链接**：修复总览页面链接，指向正确的信号类型页面路由
- **响应式布局**：优化移动端和桌面端的用户体验

### 💡 技术改进

- **智能路由系统**：单一路由文件处理多种页面类型，避免路由冲突
- **参数类型检测**：使用 `isNumericId()` 函数智能判断URL参数类型
- **路由清理**：删除重复的动态路由文件，统一使用 `[signalType]` 路由
- **类型安全**：修复SignalsTable组件props类型错误
- **异步处理**：优化数据加载和错误处理机制
- **配置驱动**：完全基于signals-config.ts配置生成页面内容

### 🎯 用户体验提升

- **一致性设计**：所有信号类型页面具有统一的布局和功能
- **直观导航**：从信号总览可以直接点击进入具体信号类型页面
- **完整功能**：每个信号类型页面都包含统计数据、信号列表、风险提示等完整功能
- **加载状态**：提供优雅的加载动画和空状态处理

### 📋 受影响的文件

- `src/app/(main)/signals/intraday/[signalType]/page.tsx` - 智能路由页面（处理信号类型和详情）
- `src/app/(main)/signals/daily/[signalType]/page.tsx` - 智能路由页面（处理信号类型和详情）
- `src/app/(main)/signals/intraday/page.tsx` - 修复总览页面链接
- `src/app/(main)/signals/daily/page.tsx` - 修复总览页面链接
- `src/config/signals-config.ts` - 使用findSignalConfig智能匹配函数
- **删除文件**：`[id]/page.tsx`、`type/[signalType]/page.tsx` 等重复路由文件

### 🚀 架构优势

- **智能化**：单一路由文件智能处理多种页面类型，大幅简化架构
- **可维护性**：统一的页面模板，易于维护和功能扩展
- **可扩展性**：新增信号类型只需更新配置，无需创建新页面文件
- **URL友好**：用户期望的URL结构（`/signals/intraday/swing_high_rebreakout`）
- **配置驱动**：页面内容完全基于配置文件动态生成，保证一致性
- **无冲突**：彻底解决Next.js动态路由slug名称冲突问题

## [0.0.10] - 路由架构重构和用户体验优化

### 🚀 路由架构重大重构

- **简化信号详情页面路由**
  - 旧路由：`/signals/intraday/swing_high_breakout/1167` ❌ 冗长复杂
  - 新路由：`/signals/intraday/1167` ✅ 简洁直观
  - 新路由：`/signals/daily/1167` ✅ 统一格式
  - 优势：更符合RESTful设计，用户友好，易于记忆和分享

### 🎯 全新信号详情页面

- **专业信号详情展示**：创建专门的信号详情页面，展示完整信号信息
  - 股票信息卡片：代码、名称、市场、价格
  - 信号详情卡片：类型、方向、置信度、状态
  - 技术指标展示：完整的meta_data信息
  - 相关信号推荐：同类型其他信号快速访问
- **差异化设计**：日内和日线信号页面有不同的特色功能和说明

### 🐛 Bug修复

- **修复信号列表展示混乱问题**

  - 问题：SignalsTable组件中Link包装TableRow破坏了HTML表格结构
  - 解决：移除Link包装，改用onClick事件处理行点击导航
  - 影响：所有信号表格现在正确显示，无布局错乱

- **修复信号详情页面404错误**
  - 问题：复杂路由结构导致URL构建错误
  - 解决：重新设计路由架构，使用简化的ID路由
  - 影响：所有信号详情页面链接现在可以正确访问

### 🔧 技术修复细节

- **日内信号页面**：`/signals/intraday/page.tsx` 链接修复
- **日线信号页面**：`/signals/daily/page.tsx` 链接修复
- **日内动态路由**：`/signals/intraday/[signalType]/page.tsx` 信号查找逻辑修复
- **日线动态路由**：`/signals/daily/[signalType]/page.tsx` 信号查找逻辑修复
- **表格组件**：`SignalsTable` 点击事件优化，保持表格结构完整性

### 🔧 后续修复

- **修复客户端组件错误**：SignalsTable组件添加`"use client"`指令

  - 问题：服务器组件不能传递事件处理函数给客户端组件
  - 解决：将SignalsTable转换为客户端组件，支持onClick事件

- **增强信号路由兼容性**：添加智能信号查找功能
  - 问题：用户尝试访问简化格式URL（如`/signals/intraday/swing_high_breakout`）时出现404
  - 解决：创建`findSignalConfig`函数，支持多种URL格式
  - 支持格式：完整ID、简化名称、数据库字段名、大小写不敏感匹配
  - 向后兼容：保持所有现有链接正常工作

### 📋 受影响的文件

- `src/app/(main)/signals/intraday/[id]/page.tsx` - 新建简化路由信号详情页面
- `src/app/(main)/signals/daily/[id]/page.tsx` - 新建简化路由信号详情页面
- `src/components/signals/signals-table.tsx` - 更新链接构建逻辑 + 客户端组件修复
- `src/config/signals-config.ts` - 添加智能信号查找函数
- **删除文件**：`src/app/(main)/signals/intraday/[signalType]/` - 移除复杂路由结构
- **删除文件**：`src/app/(main)/signals/daily/[signalType]/` - 移除复杂路由结构
- `changelog.md` - 记录重构详情

---

## [0.0.9] - 信号详情页面开发

### 🎯 信号详情页面系统

- **创建信号详情页面架构** - 为日内和日线信号创建专业的详情页面
- **动态路由实现** - 使用 `[signalType]/[signalId]` 双层动态路由结构
- **顶部统计卡片** - 参考订单详情页面样式，展示关键信息
  - 股票基本信息：价格、涨跌幅、市场、板块
  - 信号概览：置信度、触发时间、风险等级
  - 交易建议：目标价位、预期收益、持有周期
  - 风险管理：止损价位、风险控制措施

### 📊 详细信息展示

- **技术分析模块** - RSI、MACD、成交量、支撑阻力位等指标
- **基本面数据** - 市盈率、市净率、ROE、股息率等财务指标
- **历史表现** - 成功率、平均收益、最大回撤、胜率统计
- **相关资讯** - 股票相关的新闻事件和市场动态

### 🔄 日线信号特色功能

- **长期展望模块** - 趋势判断、关键价位、催化因子分析
- **市场分析** - 板块表现、资金流向、市场情绪指标
- **更丰富的技术指标** - 布林带、多重移动平均线等
- **扩展基本面数据** - 每股收益、净资产、毛利率等详细财务数据

### 🎨 用户体验优化

- **专业UI设计** - 参考真实金融产品的界面设计
- **风险提示区域** - 醒目的风险警告和免责声明
- **操作按钮** - 订阅、导出、分享、技术分析等功能入口
- **加载状态** - 完整的骨架屏加载效果

### 🔗 表格集成功能

- **点击跳转** - 信号表格行点击直接跳转到详情页面
- **视觉指示** - 添加外链图标提示可点击
- **参数传递** - 自动识别信号类型和类别构建正确链接

### 🛠️ 技术实现

- **风险等级函数** - 新增 `getRiskLevelColor` 和 `getRiskLevelLabel` 工具函数
- **模拟数据系统** - 完整的详情页面模拟数据生成
- **类型安全** - 完善的 TypeScript 类型定义
- **响应式设计** - 适配各种屏幕尺寸的布局

### 📋 受影响的文件

- `src/app/(main)/signals/intraday/[signalType]/[signalId]/page.tsx` - 日内信号详情页面
- `src/app/(main)/signals/daily/[signalType]/[signalId]/page.tsx` - 日线信号详情页面
- `src/components/signals/signals-table.tsx` - 表格组件增加点击跳转功能
- `src/config/signals-config.ts` - 新增风险等级相关工具函数

---

## [0.0.8] - 开发工作流程规范强化

### 🔴 强制规则增强

- **新增开发服务器状态检查** - 在完成后强制检查清单中增加终端输出检查
- **Bug检测强制要求** - 如果npm run dev正在运行，必须检查并修复所有错误
- **编译状态验证** - 确保所有页面编译成功，无编译错误
- **运行时错误检查** - 验证控制台无运行时错误和未捕获异常
- **网络请求验证** - 检查API请求正常，无连接失败或超时

### 📋 Bug检测指南完善

- **常见Bug类型识别** - 详细列出编译错误、运行时错误、网络请求错误等
- **Bug修复优先级** - 按照高、中、低优先级分类处理原则
- **Bug修复检查清单** - 从识别到验证的完整修复流程

### 📄 规则文档更新

- **更新.cursorrule** - 增加开发服务器状态检查强制要求
- **更新development_workflow.mdc** - 完善Bug检测和修复指南
- **强化强制检查** - 明确在结束总结前必须先解决所有Bug

---

## [0.0.7] - 表格展示系统和数据库连表查询 + Bug修复和Loading优化

### 🎯 全新表格展示系统

- **专业信号数据表格**：创建 `SignalsTable` 组件，提供完整的信号数据展示
  - 表格包含：ID、股票代码、股票名称、市场、价格、方向、置信度、创建时间、元数据、状态
  - 动态展示 `meta_data` 字段的所有数据，格式化显示键值对
  - 置信度进度条可视化展示
  - 智能数据格式化：价格、日期、元数据等自动格式化

### 🔗 数据库连表查询功能

- **股票信息集成**：信号服务支持连表查询 `stock` 表
  - 在信号查询中自动获取股票名称和市场信息
  - 更新 `Signal` 接口，添加 `stock` 字段支持
  - 表格中展示完整的股票信息而非仅显示代码

### 🐛 重大Bug修复

- **Supabase连接失败修复**：解决 `TypeError: fetch failed` 错误
  - 添加环境变量检查和优雅降级机制
  - 当Supabase不可用时自动切换到模拟数据
  - 完善错误处理，避免页面崩溃
- **模拟数据系统**：创建完整的模拟数据生成机制
  - `generateMockSignals()` 函数生成真实感的信号数据
  - `generateMockStats()` 函数生成统计数据
  - 包含丰富的元数据字段：volume、market_cap、sector等

### ⚡ Loading状态优化

- **全新Loading组件系统**：创建 `loading-spinner.tsx` 组件库
  - `LoadingSpinner` - 基础加载指示器
  - `LoadingCard` - 卡片式加载状态
  - `LoadingTable` - 表格骨架屏加载
- **Suspense边界集成**：为所有信号页面添加Suspense支持
  - 日内信号页面：`SignalDetailLoading` 组件
  - 日线信号页面：`DailySignalDetailLoading` 组件
  - 表格组件支持 `isLoading` 属性

### 🎨 界面样式优化

- **对齐专业表格样式**：参考提供的图片样式进行优化
  - 统一的表格头部样式和行间距
  - 徽章组件用于状态、方向、市场等标识
  - 代码样式的股票代码显示
  - 悬停效果和视觉反馈优化

### 🔧 技术修复

- **Next.js 15兼容性**：修复动态路由 `params` 异步访问问题
  - 日内信号页面：`await params` 解决参数访问
  - 日线信号页面：同步修复异步参数问题
- **页面重构**：完全重写信号详情页面
  - 保留信号说明和统计概览
  - 替换简单列表为专业表格展示
  - 统一日内和日线信号页面的设计风格

### 📊 数据展示增强

- **元数据动态展示**：智能解析和格式化 `meta_data` 字段
- **数据状态指示**：清晰显示数据来源和记录数量
- **空数据处理**：优雅的空状态展示和用户提示
- **实时统计更新**：基于真实数据动态计算统计指标

### 📋 受影响的文件

- `src/components/signals/signals-table.tsx` - 新建专业表格组件
- `src/components/ui/loading-spinner.tsx` - 新建Loading组件库
- `src/app/(main)/signals/intraday/[signalType]/page.tsx` - 重构使用表格展示+Loading
- `src/app/(main)/signals/daily/[signalType]/page.tsx` - 重构使用表格展示+Loading
- `src/lib/services/signals-service.ts` - 添加连表查询支持+错误处理+模拟数据

---

## [0.0.6] - 真实数据集成与CSS样式对齐

### 🔄 数据源升级

- **替换模拟数据**：所有信号页面现在使用Supabase数据库的真实数据
- **智能数据处理**：自动处理数据为空的情况，提供友好的用户提示
- **实时统计计算**：基于真实数据动态计算信号统计信息
- **错误处理机制**：完善的错误捕获和降级处理

### 🎨 CSS样式对齐

- **统一卡片样式**：具体信号页面完全对齐分析仪表板的卡片设计
- **颜色系统统一**：看涨/看跌信号使用一致的颜色标识系统
- **布局优化**：信号列表采用相同的间距和圆角设计
- **响应式改进**：确保在各种屏幕尺寸下的一致性表现

### 📊 数据状态透明化

- **数据源标识**：清晰标注当前使用的是Supabase实时数据
- **数据覆盖说明**：明确指出日内信号有数据，日线信号暂无数据
- **状态指示器**：实时显示数据加载状态和数据可用性
- **用户友好提示**：为空数据情况提供清晰的说明和建议

### 🔧 技术优化

- **异步数据加载**：所有信号页面改为异步服务器组件
- **Suspense集成**：使用React Suspense提供更好的加载体验
- **类型安全**：完善的TypeScript类型定义和错误处理
- **性能优化**：减少不必要的数据查询和计算

### 📋 受影响的文件

- `src/app/(main)/signals/daily/[signalType]/page.tsx` - 日线信号详情页面真实数据集成
- `src/app/(main)/signals/intraday/[signalType]/page.tsx` - 日内信号详情页面真实数据集成
- `src/app/(main)/analysis/dashboard/page.tsx` - 分析仪表板真实数据集成
- `src/lib/services/signals-service.ts` - 信号服务优化和错误处理

### 🐛 已修复问题

- ✅ 修复具体信号页面与仪表板页面CSS不一致问题
- ✅ 替换所有模拟数据为真实Supabase数据
- ✅ 解决数据为空时的显示问题
- ✅ 修复TypeScript类型错误

---

## [0.0.5] 动态路由架构实现和404问题修复

### 🚀 动态路由架构

- **创建通用信号页面**：实现 `[signalType]` 动态路由，一个页面处理所有信号类型
- **日内信号动态页面**：`/signals/intraday/[signalType]/page.tsx` 支持所有日内信号
- **日线信号动态页面**：`/signals/daily/[signalType]/page.tsx` 支持所有日线信号
- **智能404处理**：如果信号类型不存在或未启用，自动显示404页面

### 🐛 修复404错误

- **问题原因**：新信号配置与旧页面结构不匹配
- **解决方案**：使用动态路由替代静态页面目录
- **清理旧文件**：删除不再匹配的 `bos/`, `mss/`, `fvg/`, `ssl/`, `ob/` 目录

### 🎯 架构优势

- **可维护性**：一个页面模板处理所有信号，易于维护和更新
- **可扩展性**：新增信号类型只需更新配置文件，无需创建新页面
- **一致性**：所有信号页面具有统一的布局和功能
- **配置驱动**：页面内容完全基于信号配置动态生成

### 🎨 页面功能特性

- **信号详情展示**：根据配置显示信号名称、描述、风险等级
- **统计数据概览**：信号总数、方向分布、置信度、成功率等指标
- **实时信号列表**：模拟显示最新信号数据
- **趋势分析**：日线信号增加中长期趋势分析功能
- **操作功能**：订阅提醒、数据导出、技术分析等功能入口

### 📱 用户体验优化

- **面包屑导航**：提供返回上级页面的便捷入口
- **风险等级标识**：清晰的颜色编码和标签系统
- **响应式设计**：适配不同屏幕尺寸的完美布局
- **加载状态**：优雅的数据为空状态处理

### 🔧 技术实现

- **Next.js动态路由**：利用 `[signalType]` 参数捕获所有信号类型
- **配置验证**：通过 `getSignalByName()` 验证信号存在性和启用状态
- **类型安全**：完整的TypeScript类型定义和参数验证
- **模拟数据**：提供完整的数据结构，便于后续接入真实API

---

## [0.0.4] 信号配置系统重构和Bug修复

### 🔄 配置文件重构

- **重新配置信号类型**：根据真实数据库字段更新所有信号配置
  - 日内信号：`SWING_HIGH_REBREAKOUT`, `SWING_HIGH_BREAKOUT`, `INNERDAY_BULLISH_MSS`, `INNERDAY_BULLISH_BOS`, `PL_REVERTED`, `OTHER`, `BULLISH_OB`, `REALTIME_BREAKOUT`
  - 日线信号：`BULLISH_SSL`, `SupportZoneBreakdown`, `BULLISH_FVG`, `BEARISH_MSS`, `LIMIT_UP`, `ResistanceBreakout`, `ER`, `PL`, `BULLISH_OB`, `PPL`
- **新增风险等级字段**：为所有信号配置添加 `riskLevel: "R1" | "R2" | "R3" | "R4"` 字段
- **优化显示名称**：为前端显示提供更友好的中文名称
- **新增风险等级工具函数**：`getSignalsByRiskLevel()`, `getRiskLevelStats()`

### 🐛 Bug修复

- **修复导航组件图标导入错误**：添加缺失的lucide-react图标，修复`Gap`图标不存在的问题
- **修复TypeScript类型错误**：
  - 简化Supabase查询结构，移除复杂的关联查询
  - 修复异步函数类型问题
  - 统一代码格式，使用双引号和现代语法
- **降低函数复杂度**：重构`getSignals`函数，将复杂逻辑拆分为多个小函数
- **修复空值处理**：使用`||`替代不必要的`??`操作符

### 🎨 界面优化

- **日内信号页面增强**：
  - 添加风险等级颜色标识和统计
  - 显示风险等级分布概览
  - 添加风险提示说明
- **信号统计卡片优化**：支持风险等级显示和颜色主题

### 📝 代码质量提升

- **ESLint错误修复**：解决大部分代码格式和类型问题
- **代码结构优化**：函数拆分，提高可读性和可维护性
- **类型安全增强**：改进TypeScript类型定义

### 🔧 技术改进

- **Supabase集成优化**：简化查询语法，提高性能
- **配置驱动架构**：完全基于配置文件生成界面和功能
- **错误处理增强**：改进错误信息和异常处理机制

---

## [0.0.3] 规则文档优化和配置系统建立

### 📚 规则文档体系重构

- **重写 `.cursorrule` 核心规则文件**
  - 移除失效的mdc文件引用链接
  - 整合所有核心规范到单一文件
  - 建立清晰的项目概览、快速开始、开发工作流程结构
  - 强化强制检查清单的重要性

### 📖 创建完整规则文档

- **`project_structure.mdc`** - 项目结构规范
  - 目录组织和文件命名规范
  - 扩展规则和配置文件管理
- **`frontend_ui.mdc`** - 前端UI规范
  - 设计系统和组件使用规范
  - 响应式设计和性能优化指南
- **`backend_api.mdc`** - 后端API规范
  - Supabase集成和数据访问规范
  - 权限控制和错误处理机制
- **`development_workflow.mdc`** - 开发工作流程
  - 完整开发流程和强制检查清单
  - 提交规范和代码质量要求
- **`help.mdc`** - 文档导航和使用指南
  - 提供清晰的快速开始和问题排查指南

### 🗄️ 配置系统建立

- **创建 `signals-config.ts` 信号配置系统**
  - 支持日内和日线两种信号类别
  - 包含完整的信号元数据（名称、描述、颜色、图标等）
  - 提供配置查询和过滤工具函数
- **动态导航系统**
  - 基于配置自动生成侧边栏导航
  - 支持图标映射和路径解析

### 🔧 后端服务层

- **创建 `signals-service.ts` 数据服务**
  - 基于配置的信号查询功能
  - 支持分页、筛选、搜索等功能
  - 统计信息获取和数据聚合

### 🎨 UI组件开发

- **信号统计卡片组件**
  - 显示信号统计信息和趋势
  - 支持自定义颜色主题和图标
- **分析仪表板页面**
  - 配置驱动的统计展示
  - 分类统计和实时数据展示

### 🧹 项目清理

- **删除冗余规则文档**：移除7个空的.mdc文件
- **changelog更新机制**：建立变更记录和文档同步机制

---

## [0.0.2] 项目初始化

### 🚀 项目基础架构

- **Next.js 15 项目搭建**：使用最新的App Router架构
- **UI组件库集成**：shadcn/ui + Tailwind CSS设计系统
- **数据库集成**：Supabase作为后端服务
- **认证系统**：用户登录注册功能框架

### 📁 目录结构建立

- **多布局支持**：`(main)`, `(external)` 路由组
- **组件化架构**：可复用UI组件和业务组件分离
- **配置管理**：集中化配置文件管理
- **服务层抽象**：数据访问和业务逻辑分离

### 🔐 权限和中间件

- **路由保护**：基于中间件的访问控制
- **用户认证**：JWT token管理和会话处理

### 📊 数据表结构

- **用户管理表**：用户信息和权限管理
- **交易信号表**：信号数据存储和查询优化
- **股票信息表**：股票基础数据管理

---

## [0.0.1] - 信号配置优化与方向显示功能

### ✨ 新增功能

- **信号方向分类**：为所有信号配置添加direction字段（bullish/bearish/neutral）
- **方向标签显示**：在信号页面显示做多/做空/中性标签
- **方向统计功能**：新增方向相关的统计和过滤功能
- **统一页面设计**：日内信号页面完全对齐日线信号页面的UI设计

### 🔧 配置文件更新

- **信号接口扩展**：SignalConfig接口新增direction字段
- **新工具函数**：添加getSignalsByDirection、getDirectionStats、getDirectionLabel、getDirectionColor函数
- **日内信号方向配置**：8个日内信号全部标记为bullish（1个neutral）
- **日线信号方向配置**：10个日线信号包含bullish（8个）和bearish（2个）

### 🎨 界面优化

- **统一设计风格**：日内信号页面采用与日线信号相同的卡片布局和统计展示
- **方向颜色标识**：看涨（绿色）、看跌（红色）、中性（灰色）
- **风险提示优化**：针对日内和日线信号特性提供专门的风险提示内容
- **图标和样式统一**：确保所有信号页面视觉一致性

### 🔨 技术修复

- **异步函数修复**：解决分析仪表板页面的statsData.map错误
- **导入错误修复**：修复Gap图标不存在的导入错误
- **TypeScript类型完善**：完善所有信号配置的类型定义

### 📋 受影响的文件

- `src/config/signals-config.ts` - 扩展信号配置接口和工具函数
- `src/app/(main)/signals/intraday/page.tsx` - 重写日内信号页面
- `src/app/(main)/signals/daily/page.tsx` - 添加方向显示
- `src/app/(main)/signals/intraday/[signalType]/page.tsx` - 添加方向标签
- `src/app/(main)/signals/daily/[signalType]/page.tsx` - 添加方向标签
- `src/app/(main)/analysis/dashboard/page.tsx` - 修复异步函数错误

---

## 变更记录说明

本changelog记录了项目的重要变更和发展历程。每个版本都包含：

- **功能新增** 🚀
- **Bug修复** 🐛
- **性能优化** ⚡
- **文档更新** 📚
- **架构改进** 🔧
- **UI/UX优化** 🎨

所有变更都遵循项目规范，确保代码质量和系统稳定性。

---

## [0.0.12] 信号详情页面全面升级 - 丰富模拟数据展示

### 🎯 核心改进

- **信号详情页面全面重构**：为数字ID路由（如 `/signals/intraday/1217`）添加丰富的模拟数据展示
- **专业级交易分析**：提供完整的技术分析、风险管理和交易建议信息
- **差异化设计**：日内信号和日线信号采用不同的参数配置，体现不同时间框架的特点

### 📊 新增信息模块

#### 1. 市场环境分析

- **趋势强度**：可视化进度条显示趋势强度百分比
- **波动率**：当前股票的波动率指标
- **成交量对比**：当前成交量 vs 平均成交量

#### 2. 技术分析详情

- **关键价位**：支撑位、阻力位、目标价位、止损位
- **风险收益比**：智能计算的风险收益比例
- **价格展示**：使用货币格式化，颜色区分不同价位类型

#### 3. 历史表现统计

- **成功率**：带进度条的可视化成功率展示
- **收益指标**：平均收益、最大回撤、夏普比率
- **交易统计**：总交易次数、盈利/亏损次数、平均持仓期

#### 4. 交易建议系统

- **入场策略**：建议入场价、最佳入场区间、建议仓位
- **持仓管理**：止损位、分阶段目标价位
- **风险提示**：基于风险等级的个性化风险提示和投资建议

### 🔧 技术实现

#### 模拟数据生成算法

- **日内信号**：10%价格波动范围，2-10天持仓期，75-95%成功率
- **日线信号**：15%价格波动范围，5-20天持仓期，78-95%成功率
- **智能计算**：基于信号ID和价格的确定性随机算法，确保数据一致性

#### 响应式设计优化

- **三列布局**：基本信息、信号详情、市场环境
- **两列分析**：技术分析 + 历史表现
- **交易建议**：三栏式交易策略展示

### 🎨 用户体验提升

#### 视觉效果

- **颜色编码**：绿色(支撑)、红色(阻力)、蓝色(目标)、橙色(止损)
- **进度条**：趋势强度、成功率等关键指标的可视化展示
- **徽章系统**：风险等级、方向标识的清晰展示

#### 信息层次

- **分类明确**：股票信息、技术分析、历史表现、交易建议
- **重点突出**：关键数据使用大字体和颜色强调
- **详细说明**：每个模块都有清晰的描述和说明

### 📋 受影响的文件

- `src/app/(main)/signals/intraday/[signalType]/page.tsx` - 日内信号详情页面全面升级
- `src/app/(main)/signals/daily/[signalType]/page.tsx` - 日线信号详情页面全面升级

### 🚀 功能亮点

- **专业性**：提供机构级别的信号分析信息
- **实用性**：包含完整的交易策略和风险管理建议
- **差异化**：日内和日线信号采用不同的参数配置
- **一致性**：所有模拟数据基于确定性算法，刷新页面数据保持一致
- **教育性**：详细的风险提示和投资建议，适合不同经验水平的投资者

### 💡 设计理念

- **数据驱动**：基于真实交易需求设计的信息架构
- **风险意识**：强调风险管理和合理的投资建议
- **用户友好**：清晰的信息层次和直观的视觉设计
- **可扩展性**：模块化设计，便于后续添加更多分析功能

---

## [未发布] - 重大Bug修复与功能增强

### 🐛 关键Bug修复

- **修复了 Radix UI 模块解析错误** - 解决了 "Cannot find module './vendor-chunks/@radix-ui.js'" 的运行时错误
- 修复了 Next.js 15 动态路由中 `params` 异步处理问题
- 移除了 `next.config.mjs` 中无效的配置项 (`optimizeFonts`, `serverComponentsExternalPackages`)
- 解决了 signals layout 中的 TypeScript 错误

### 🔧 Radix UI 架构重构

- **卸载了错误的 `radix-ui` 包**，改用官方推荐的分包模式
- **安装了24个正确的 Radix UI 组件包**:
  - `@radix-ui/react-slot`, `@radix-ui/react-dialog`, `@radix-ui/react-dropdown-menu`
  - `@radix-ui/react-tooltip`, `@radix-ui/react-popover`, `@radix-ui/react-label`
  - 等等所有必需的UI组件包
- **批量修复了所有UI组件的导入语句** - 从 `"radix-ui"` 改为对应的 `"@radix-ui/react-*"`
- **更新了 Slot 组件使用方式** - 从 `SlotPrimitive.Slot` 改为直接使用 `Slot`

### ✨ 新功能

- **股票页面增强**

  - 添加行业信息显示 (从 `stock.meta_data.industry` 获取)
  - 表格新增"触发时价格"和"涨跌幅"字段
  - 涨跌幅支持颜色和图标指示 (红色上涨/绿色下跌)
  - 限制显示最近20条信号数据

- **信号页面表格优化**

  - **去掉了市场列、置信度列、meta_data列** - 简化信号页面表格显示
  - **修复了方向字段显示逻辑** - 正确处理数字形式（1=看涨，-1=看跌）和字符串形式
  - **统一方向显示为文字** - 所有方向都显示"看涨"或"看跌"，使用颜色区分（看涨=绿色，看跌=红色）
  - **新增"触发时价格"列** - 从 `meta_data.price` 获取，若无则使用 `signal.price`
  - **新增"涨跌幅"列** - 从 `meta_data.change_rate` 获取，带颜色和图标指示
  - **新增"行业"列** - 从 `stock.meta_data.industry` 获取，显示股票所属行业
  - **影响页面**:
    - `/signals/intraday/[signalType]` - 日内信号类型页面
    - `/signals/daily/[signalType]` - 日线信号类型页面
    - `/signals/intraday/[signalType]/[id]` - 日内信号详情页面
    - `/signals/daily/[signalType]/[id]` - 日线信号详情页面

- **页面布局统一**
  - 为 `/stocks/[symbol]`、`/analysis/dashboard`、`/analysis/overview` 添加统一顶部栏
  - 包含搜索功能、主题切换、账户切换等组件
  - 与其他页面保持一致的用户体验

### 🎨 界面优化

- **SignalsTable组件增强**
  - 添加了 `isSignalPage` 参数支持信号页面专用显示模式
  - **统一方向字段显示** - 改为纯文字显示，使用颜色区分（看涨=绿色，看跌=红色）
  - **新增行业列支持** - 从 `stock.meta_data.industry` 获取并显示
  - 优化了表格列的布局和可读性
  - 支持三种显示模式：默认模式、股票页面模式、信号页面模式
  - **移除了不必要的徽章组件** - 方向字段改为简洁的文字+颜色显示

### 🔧 技术改进

- 更新 `SignalsTable` 组件支持多种显示模式
- 优化股票信息获取和显示逻辑
- 改进数据查询性能 (限制查询数量)
- 修复了所有 shadcn/ui 组件的 Radix UI 依赖问题
- 改进了方向字段的数据处理逻辑

### ⚠️ 已知问题

- **ESLint 警告**: 存在大量代码风格警告，不影响功能但影响生产构建
- **建议**: 后续可以考虑调整 ESLint 配置或逐步修复代码风格问题

### 📝 文档更新

- 更新 bug 记录文档，详细记录了 Radix UI 问题的修复过程
- 添加了修复方案和影响文件的完整列表
- 记录了信号页面表格优化的详细变更

---

## [之前版本]

### 🎯 核心功能完成

- 应用名称更改为 "TIDE AIGO LABS"
- 完成统一搜索功能实现
- 创建股票详情页面 `/stocks/[symbol]`
- 实现 analysis 页面左边栏框架
- 解决 Hydration Error 问题
- 完成环境变量配置和 Supabase 集成

### 🔍 搜索系统

- 智能识别股票（中文名称/代码）和信号（数字ID）
- 客户端-服务端分离架构
- 优雅的加载状态和错误处理
- 支持 Cmd/Ctrl+J 快捷键

### 🗄️ 数据架构

- 建立完整的 Supabase 数据流
- 创建专用的 API 路由
- 实现客户端和服务端搜索服务分离

# 更新日志

## [1.1.0] - 2025-01-16

### ✅ 重大成就 - Dashboard前端应用成功部署

#### 🚀 成功解决的问题

1. **TypeScript构建错误修复**
   - 修复了信号方向类型不匹配问题 ("BULLISH"/"BEARISH" vs "long"/"short")
   - 在 `signals-config.ts` 中添加了类型转换函数
   - 确保了数据库字段和配置文件的兼容性

2. **环境变量安全检查**
   - 在 `src/lib/database/config.ts` 中添加了 `process.env` 的安全检查
   - 避免了预渲染时访问未定义环境变量的错误
   - 提供了默认的开发环境配置，确保构建过程的稳定性

3. **构建流程优化**
   - 成功清理了 `.next` 缓存并重新构建
   - 解决了预渲染错误 `Cannot read properties of undefined (reading 'env')`
   - 确保了生产构建的完整性

#### 🎯 部署成果

- **✅ 应用成功启动**：在端口 3100 正常运行
- **✅ 路由正常工作**：`/` 正确重定向到 `/signals` (HTTP 307)
- **✅ 核心页面可访问**：
  - `/signals` - HTTP 200
  - `/signals/daily` - HTTP 200  
  - `/signals/intraday` - HTTP 200
- **✅ TypeScript编译**：无类型错误
- **✅ 预渲染成功**：x-nextjs-cache: HIT
- **✅ 连接现有服务**：成功连接到 Docker 环境中的 Supabase (54321) 和 Redis (6379)

#### 🔧 技术架构

- **混合部署架构**：前端运行在本地生产模式，后端服务在 Docker 容器中
- **环境配置**：使用标准的本地 Supabase 开发密钥
- **端口配置**：应用运行在目标端口 3100
- **缓存策略**：Next.js 预渲染和静态生成正常工作

#### 📝 代码质量

- **TypeScript**：编译通过，无类型错误
- **ESLint**：主要为代码风格警告，不影响功能
- **构建大小**：优化的生产构建，支持 standalone 模式

### 🔄 部署方式

```bash
# 清理缓存并构建
rm -rf .next && npm run build

# 在端口3100启动生产应用
PORT=3100 npm start
```

### 🌐 访问地址

- **主应用**：http://localhost:3100
- **信号页面**：http://localhost:3100/signals
- **每日信号**：http://localhost:3100/signals/daily
- **分钟信号**：http://localhost:3100/signals/intraday

### 📋 验证清单完成

- [x] **TypeScript编译检查** - ✅ 通过
- [x] **应用构建** - ✅ 成功
- [x] **生产启动** - ✅ 端口3100正常运行
- [x] **路由测试** - ✅ 重定向和页面访问正常
- [x] **服务连接** - ✅ 连接到现有Docker服务
- [x] **HTTP状态检查** - ✅ 所有核心页面返回200/307
- [x] **缓存验证** - ✅ Next.js预渲染正常

---

## [1.0.9] - 2025-01-16
