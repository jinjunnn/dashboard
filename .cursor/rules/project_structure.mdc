---
description: 
globs: 
alwaysApply: false
---
# é¡¹ç›®ç»“æ„è§„èŒƒ

## ğŸ“ ç›®å½•ç»“æ„è¯´æ˜

### åº”ç”¨è·¯ç”±ç»“æ„ (`src/app/`)
```
src/app/
â”œâ”€â”€ (main)/                 # ä¸»åº”ç”¨è·¯ç”±ç»„ - éœ€è¦è®¤è¯
â”‚   â”œâ”€â”€ dashboard/         # ä¸»ä»ªè¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ _components/   # ä»ªè¡¨æ¿ä¸“ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout.tsx     # ä»ªè¡¨æ¿å¸ƒå±€
â”‚   â”‚   â””â”€â”€ page.tsx       # ä»ªè¡¨æ¿ä¸»é¡µ
â”‚   â”œâ”€â”€ signals/           # ä¿¡å·åˆ†ææ¨¡å—
â”‚   â”‚   â”œâ”€â”€ _components/   # ä¿¡å·åˆ†æç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ daily/         # æ—¥çº¿ä¿¡å·é¡µé¢
â”‚   â”‚   â”œâ”€â”€ intraday/      # åˆ†æ—¶ä¿¡å·é¡µé¢
â”‚   â”‚   â”œâ”€â”€ layout.tsx     # ä¿¡å·æ¨¡å—å¸ƒå±€
â”‚   â”‚   â””â”€â”€ page.tsx       # ä¿¡å·æ¨¡å—ä¸»é¡µ
â”‚   â”œâ”€â”€ analysis/          # åˆ†ææ¨¡å— â­ å·²é›†æˆ
â”‚   â”‚   â”œâ”€â”€ dashboard/     # åˆ†æä»ªè¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ overview/      # åˆ†ææ¦‚è§ˆ
â”‚   â”‚   â””â”€â”€ layout.tsx     # åˆ†ææ¨¡å—å¸ƒå±€
â”‚   â””â”€â”€ stocks/            # è‚¡ç¥¨æ¨¡å— â­ æ–°å¢
â”‚       â”œâ”€â”€ [symbol]/      # åŠ¨æ€è‚¡ç¥¨è¯¦æƒ…é¡µé¢
â”‚       â”‚   â””â”€â”€ page.tsx   # è‚¡ç¥¨è¯¦æƒ…é¡µ
â”‚       â””â”€â”€ layout.tsx     # è‚¡ç¥¨æ¨¡å—å¸ƒå±€
â”œâ”€â”€ (external)/            # å¤–éƒ¨è®¿é—®é¡µé¢ - æ— éœ€è®¤è¯
â”‚   â””â”€â”€ page.tsx          # å¤–éƒ¨ä¸»é¡µ
â”œâ”€â”€ auth/                  # è®¤è¯ç›¸å…³é¡µé¢
â”‚   â””â”€â”€ v1/               # è®¤è¯v1ç‰ˆæœ¬
â”‚       â”œâ”€â”€ login/        # ç™»å½•é¡µé¢
â”‚       â””â”€â”€ register/     # æ³¨å†Œé¡µé¢
â”œâ”€â”€ layout.tsx            # æ ¹å¸ƒå±€
â”œâ”€â”€ globals.css           # å…¨å±€æ ·å¼
â””â”€â”€ favicon.ico           # ç½‘ç«™å›¾æ ‡
```

### ç»„ä»¶ç»“æ„ (`src/components/`)
```
src/components/
â”œâ”€â”€ ui/                   # shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ button.tsx       # æŒ‰é’®ç»„ä»¶
â”‚   â”œâ”€â”€ input.tsx        # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”œâ”€â”€ table.tsx        # è¡¨æ ¼ç»„ä»¶
â”‚   â””â”€â”€ ...              # å…¶ä»–UIç»„ä»¶
â”œâ”€â”€ data-table/          # æ•°æ®è¡¨æ ¼ä¸“ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ data-table.tsx   # ä¸»è¡¨æ ¼ç»„ä»¶
â”‚   â”œâ”€â”€ columns.tsx      # è¡¨æ ¼åˆ—å®šä¹‰
â”‚   â””â”€â”€ ...              # è¡¨æ ¼ç›¸å…³å·¥å…·
â”œâ”€â”€ search/              # æœç´¢åŠŸèƒ½ç»„ä»¶ â­ æ–°å¢
â”‚   â””â”€â”€ enhanced-search-dialog.tsx # å¢å¼ºæœç´¢å¯¹è¯æ¡†
â””â”€â”€ signals/             # ä¿¡å·ç›¸å…³ç»„ä»¶
    â”œâ”€â”€ signal-stats-card.tsx      # ä¿¡å·ç»Ÿè®¡å¡ç‰‡
    â””â”€â”€ signals-table.tsx          # ä¿¡å·è¡¨æ ¼ç»„ä»¶
```

### å·¥å…·åº“ç»“æ„ (`src/lib/`)
```
src/lib/
â”œâ”€â”€ supabase/            # Supabaseç›¸å…³
â”‚   â””â”€â”€ server.ts        # æœåŠ¡ç«¯å®¢æˆ·ç«¯
â”œâ”€â”€ services/            # ä¸šåŠ¡æœåŠ¡å±‚ â­ æ–°å¢
â”‚   â”œâ”€â”€ signals-service.ts    # ä¿¡å·æŸ¥è¯¢æœåŠ¡
â”‚   â””â”€â”€ search-service.ts     # æœç´¢æœåŠ¡
â”œâ”€â”€ utils.ts             # é€šç”¨å·¥å…·å‡½æ•°
â””â”€â”€ layout-preferences.ts # å¸ƒå±€åå¥½è®¾ç½®
```

### é…ç½®æ–‡ä»¶ç»“æ„ (`src/config/`)
```
src/config/
â”œâ”€â”€ app-config.ts        # åº”ç”¨å…¨å±€é…ç½®
â””â”€â”€ signals-config.ts    # ä¿¡å·ç±»å‹é…ç½® â­ æ–°å¢
```

#### ä¿¡å·é…ç½®è¯´æ˜
`signals-config.ts` æ–‡ä»¶ç”¨äºç®¡ç†ä¸åŒæ—¶é—´æ¡†æ¶ä¸‹çš„ä¿¡å·ç±»å‹ï¼š

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- å®šä¹‰æ—¥å†…ï¼ˆintradayï¼‰å’Œæ—¥çº¿ï¼ˆdailyï¼‰ä¿¡å·çš„ä¸åŒåç§°
- é…ç½®ä¿¡å·çš„æ˜¾ç¤ºåç§°ã€é¢œè‰²ã€å›¾æ ‡ç­‰UIå±æ€§
- æä¾›ä¿¡å·å¯ç”¨/ç¦ç”¨æ§åˆ¶
- æ”¯æŒä¿¡å·ç±»å‹æ˜ å°„å’ŒæŸ¥è¯¢åŠŸèƒ½

**ä½¿ç”¨åœºæ™¯ï¼š**
- å·¦ä¾§å¯¼èˆªæ çš„ä¿¡å·ç±»å‹ä¸‹æ‹‰èœå•
- ä¿¡å·æŸ¥è¯¢å’Œç­›é€‰åŠŸèƒ½
- ä¿¡å·å±•ç¤ºçš„UIé…ç½®

## ğŸ“‹ æ–‡ä»¶å‘½åè§„èŒƒ

### é¡µé¢æ–‡ä»¶
- **é¡µé¢ç»„ä»¶**: `page.tsx` - Next.jsçº¦å®šçš„é¡µé¢æ–‡ä»¶
- **å¸ƒå±€ç»„ä»¶**: `layout.tsx` - Next.jsçº¦å®šçš„å¸ƒå±€æ–‡ä»¶
- **ç§æœ‰ç»„ä»¶**: `_components/` - ä¸‹åˆ’çº¿å‰ç¼€è¡¨ç¤ºç§æœ‰ç›®å½•

### ç»„ä»¶æ–‡ä»¶
- **UIç»„ä»¶**: `kebab-case.tsx` - å¦‚ `data-table.tsx`
- **é¡µé¢ç»„ä»¶**: `PascalCase.tsx` - å¦‚ `LoginForm.tsx`
- **å·¥å…·æ–‡ä»¶**: `kebab-case.ts` - å¦‚ `table-utils.ts`

### ç›®å½•å‘½å
- **è·¯ç”±ç»„**: `(group-name)/` - æ‹¬å·åŒ…å›´çš„è·¯ç”±ç»„
- **ç§æœ‰ç›®å½•**: `_private/` - ä¸‹åˆ’çº¿å‰ç¼€
- **å¸¸è§„ç›®å½•**: `kebab-case/` - çŸ­æ¨ªçº¿åˆ†éš”

## ğŸš€ æ‰©å±•è§„åˆ™

### æ·»åŠ æ–°é¡µé¢
1. ç¡®å®šé¡µé¢å±äºå“ªä¸ªè·¯ç”±ç»„ (`(main)` æˆ– `(external)`)
2. åœ¨å¯¹åº”ç›®å½•ä¸‹åˆ›å»º `page.tsx`
3. å¦‚éœ€ä¸“ç”¨ç»„ä»¶ï¼Œåˆ›å»º `_components/` ç›®å½•
4. å¦‚éœ€ç‰¹æ®Šå¸ƒå±€ï¼Œåˆ›å»º `layout.tsx`

### æ·»åŠ æ–°ç»„ä»¶
1. **UIç»„ä»¶** â†’ `src/components/ui/`
2. **ä¸šåŠ¡ç»„ä»¶** â†’ å¯¹åº”åŠŸèƒ½æ¨¡å—çš„ `_components/`
3. **é€šç”¨ç»„ä»¶** â†’ `src/components/`

### æ·»åŠ å·¥å…·å‡½æ•°
1. **é€šç”¨å·¥å…·** â†’ `src/lib/utils.ts`
2. **ä¸“ç”¨å·¥å…·** â†’ å¯¹åº”åŠŸèƒ½æ¨¡å—ä¸‹åˆ›å»ºå·¥å…·æ–‡ä»¶
3. **ç¬¬ä¸‰æ–¹é›†æˆ** â†’ `src/lib/` ä¸‹åˆ›å»ºä¸“é—¨ç›®å½•

### æ·»åŠ é…ç½®é¡¹
1. **åº”ç”¨é…ç½®** â†’ `src/config/app-config.ts`
2. **ä¿¡å·é…ç½®** â†’ `src/config/signals-config.ts`
3. **æ–°å¢é…ç½®ç±»å‹** â†’ åœ¨å¯¹åº”é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç±»å‹å®šä¹‰å’Œå¯¼å‡ºå‡½æ•°

#### ä¿¡å·é…ç½®ä¿®æ”¹æŒ‡å—
```typescript
// 1. ä¿®æ”¹ä¿¡å·é…ç½®
export const intradaySignals: SignalConfig[] = [
  {
    id: 'new_signal_id',
    name: 'NEW_SIGNAL',           // æ•°æ®åº“ä¸­çš„ä¿¡å·ç±»å‹åç§°
    displayName: 'æ–°ä¿¡å·ç±»å‹',    // UIæ˜¾ç¤ºåç§°
    description: 'ä¿¡å·æè¿°',
    category: 'intraday',
    enabled: true,                // æ˜¯å¦å¯ç”¨
    color: '#color',             // æ˜¾ç¤ºé¢œè‰²
    icon: 'IconName'             // å›¾æ ‡åç§°
  }
]

// 2. æ›´æ–°ç±»å‹æ˜ å°„ï¼ˆå¦‚æœéœ€è¦ï¼‰
export const signalTypeMapping: Record<string, string> = {
  'NEW_SIGNAL': 'new_signal_id'
}
```

## ğŸ” æœç´¢åŠŸèƒ½æ¶æ„

### ç»Ÿä¸€æœç´¢ç³»ç»Ÿ â­ è¯¦è§ [æœç´¢ç³»ç»Ÿè§„èŒƒ](mdc:.cursor/rules/search-system.mdc)
**ä½ç½®**: é¡¶éƒ¨headeræœç´¢æ  (layout.tsx)
**ç»„ä»¶**: `EnhancedSearchDialog`
**è§¦å‘**: å›è½¦é”®æœç´¢ï¼Œ`Cmd/Ctrl + J` å¿«æ·é”®

**æ ¸å¿ƒç‰¹æ€§:**
1. **å›è½¦è§¦å‘**: è¾“å…¥å®ŒæˆåæŒ‰å›è½¦é”®è§¦å‘æœç´¢
2. **çŠ¶æ€é‡ç½®**: å¯¹è¯æ¡†æ‰“å¼€æ—¶é‡ç½®æ‰€æœ‰çŠ¶æ€
3. **å³æ—¶æ˜¾ç¤º**: æœç´¢ç»“æœç«‹å³åœ¨å½“å‰å¯¹è¯æ¡†ä¸­æ˜¾ç¤º
4. **æ™ºèƒ½è·¯ç”±**: è‚¡ç¥¨/ä¿¡å·æ™ºèƒ½è·³è½¬åˆ°å¯¹åº”é¡µé¢

**å®ç°æ¶æ„:**
```
ç”¨æˆ·è¾“å…¥ â†’ å›è½¦è§¦å‘ â†’ å®¢æˆ·ç«¯æœåŠ¡ â†’ APIè·¯ç”± â†’ æœåŠ¡ç«¯æœåŠ¡ â†’ ç»“æœæ˜¾ç¤º
```

### æœç´¢æœåŠ¡å±‚
**æ–‡ä»¶**: `src/lib/services/search-service.ts`
**åŠŸèƒ½**:
- è‚¡ç¥¨ä»£ç æ ‡å‡†åŒ– (0/3å¼€å¤´â†’SZ., 6å¼€å¤´â†’SH.)
- å¹¶è¡Œæ•°æ®åº“æŸ¥è¯¢
- æ™ºèƒ½ç±»å‹è¯†åˆ«
- é”™è¯¯å¤„ç†ä¸é™çº§

## ğŸ¨ ä¸»é¢˜ç³»ç»Ÿä¿®å¤

### Hydrationé”™è¯¯è§£å†³æ–¹æ¡ˆ
**é—®é¢˜**: æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ¸²æŸ“ä¸åŒ¹é…
**è§£å†³**: ä½¿ç”¨ `mounted` çŠ¶æ€ç¡®ä¿å®¢æˆ·ç«¯æ¸²æŸ“ä¸€è‡´æ€§

```typescript
// ThemeSwitcher ä¿®å¤æ¨¡å¼
const [mounted, setMounted] = useState(false);
useEffect(() => setMounted(true), []);

if (!mounted) {
  return <Button size="icon" disabled><Sun /></Button>;
}
```

**ä¿®å¤æ–‡ä»¶**:
- `src/app/(main)/dashboard/_components/sidebar/theme-switcher.tsx`
- `src/app/(main)/signals/_components/sidebar/theme-switcher.tsx`

## ğŸ“ é…ç½®æ›´æ–°è®°å½•

### åº”ç”¨é…ç½®æ›´æ–°
**æ–‡ä»¶**: `src/config/app-config.ts`
- åº”ç”¨åç§°: `Studio Admin` â†’ `TIDE AIGO LABS`
- æ ‡é¢˜: æ›´æ–°ä¸º `é‡åŒ–äº¤æ˜“ç³»ç»Ÿ`
- æè¿°: æ›´æ–°ä¸ºä¸­æ–‡æè¿°

### æ–°å¢è·¯ç”±é…ç½®
- `/analysis/*` - åˆ†ææ¨¡å— (å·²æœ‰layout)
- `/stocks/[symbol]` - è‚¡ç¥¨è¯¦æƒ…é¡µé¢ (æ–°å¢)
- æœç´¢åŠŸèƒ½é›†æˆåˆ°æ‰€æœ‰layoutçš„headerä¸­
